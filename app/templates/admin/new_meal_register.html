{% extends "admin/base.html" %}

{% block page_css %}
<link rel="stylesheet" href="{{ css_root }}/new_meal_register.css">
{% endblock %}

{% block content %}
<h2>新規メニュー登録</h2>

<p class="description-text">
  アレルギー表に新しく登場したメニューです。<br>
  一か月メニュー表を確認し、正式な料理名を入力してください。
</p>

{% if new_meal_ids|length == 0 %}
  <div class="info-message">
    現在、登録が必要な新規メニューはありません。
  </div>
{% else %}

<form id="meal-register-form">
  <table class="data-table">
    <thead>
      <tr>
        <th class="col-id">ID</th>
        <th>正式名称（必須）</th>
        <th>ふりがな</th>
        <th>栄養価（任意）</th>
      </tr>
    </thead>
    <tbody>
    {% for mid in new_meal_ids %}
      <tr>
        <td>{{ mid }}</td>

        <td>
          <input type="text"
                 name="items[{{ loop.index0 }}][meal_name]"
                 class="input-field" 
                 required>
          <input type="hidden"
                 name="items[{{ loop.index0 }}][meal_id]"
                 value="{{ mid }}">
        </td>

        <td>
          <input type="text"
                 name="items[{{ loop.index0 }}][furigana]"
                 class="input-field">
        </td>

        <td>
          <div class="nutrition-group">
            <label class="small-label">kcal</label>
            <input type="number" step="0.1" name="items[{{ loop.index0 }}][kcal]" class="input-field-small">

            <label class="small-label">タンパク質</label>
            <input type="number" step="0.1" name="items[{{ loop.index0 }}][protein]" class="input-field-small">

            <label class="small-label">脂質</label>
            <input type="number" step="0.1" name="items[{{ loop.index0 }}][fat]" class="input-field-small">

            <label class="small-label">炭水化物</label>
            <input type="number" step="0.1" name="items[{{ loop.index0 }}][carb]" class="input-field-small">

            <label class="small-label">塩分</label>
            <input type="number" step="0.1" name="items[{{ loop.index0 }}][salt]" class="input-field-small">
          </div>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>

  <div class="meal-actions">
    <button type="button" id="submit-btn" class="primary-button">
      登録する
    </button>
  </div>
</form>

{% endif %}
{% endblock %}

{% block page_js %}
<script src="{{ js_root }}/new_meal_register.js"></script>
{% endblock %}